---
phase: 09-deployment
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All three tabs render correctly in the browser (Flat BOM, Comparison, Hierarchy)"
    - "Tab switching works without console errors"
    - "All JS module files load with 200 status (no 404s, no MIME type errors)"
    - "CSS loads and application is styled correctly"
    - "User knows how to rollback if a future commit breaks the site"
  artifacts:
    - path: ".planning/phases/09-deployment/09-02-SUMMARY.md"
      provides: "Browser verification results and rollback documentation"
  key_links:
    - from: "index.html"
      to: "js/main.js"
      via: "script type=module"
      pattern: "script.*type.*module.*src.*js/main.js"
    - from: "js/main.js"
      to: "js/ui/*.js"
      via: "ES6 import"
      pattern: "import.*from.*./ui/"
    - from: "js/ui/*.js"
      to: "js/core/*.js"
      via: "ES6 import"
      pattern: "import.*from.*../core/"
---

<objective>
Systematically verify the deployed BOM Tool works correctly in the browser, and establish a rollback procedure.

Purpose: This is the FIRST browser verification of the entire 8-phase refactor. All prior testing was automated Node.js tests only. Browser-specific issues (ES6 module loading, DOM binding, event listeners, CSS rendering, CDN loading) have never been tested. This plan catches any issues that automated tests could not detect.

Output: Verified deployment with documented browser test results, and a clear rollback procedure the user can follow if needed.
</objective>

<execution_context>
@C:/Users/amcallister/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/amcallister/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-deployment/09-RESEARCH.md
@.planning/phases/09-deployment/09-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Browser verification of deployed application</name>
  <what-built>The BOM Tool has been deployed to GitHub Pages after 8 phases of refactoring from a single 4400-line HTML file into a multi-file ES6 module architecture. This is the first time the refactored application runs in a real browser.</what-built>
  <how-to-verify>
Open https://mondreykr.github.io/bom-tool/ in your browser and test each item below. Report results as PASS or FAIL for each.

**Step 1: Open DevTools**
Press F12 to open browser DevTools. Keep the Console tab visible while testing.

**Step 2: Check module loading**
In DevTools, click the "Network" tab, then reload the page (Ctrl+R).
Filter by "JS" type. You should see these files all loading with status 200:
- main.js
- flat-bom.js
- comparison.js
- hierarchy.js
- state.js
- parser.js
- tree.js
- flatten.js
- compare.js
- utils.js
- environment.js
- shared.js (from export/)
- excel.js (from export/)
- html.js (from export/)
- xlsx.full.min.js (from CDN)

Report: How many JS files loaded? Any 404 errors?

**Step 3: Check console for errors**
Switch to the Console tab. Are there any red error messages?
Report: Clean console, or list any errors you see.

**Step 4: Check CSS loading**
Does the page look styled? (Blue header, tab buttons, clean layout)
Report: PASS or FAIL with description.

**Step 5: Test tab switching**
Click each tab button: "Flat BOM", "BOM Comparison", "Hierarchy View"
Each click should show different content area.
Report: PASS or FAIL.

**Step 6: Test Flat BOM tab (if you have a test file)**
If you have a BOM XML or CSV file available:
1. Click "Flat BOM" tab
2. Click the file upload area or drag a file in
3. Does it process and show a results table?
Report: PASS, FAIL, or SKIPPED (no test file available).

**Step 7: Test BOM Comparison tab (if you have two files)**
If you have two BOM files (old and new revision):
1. Click "BOM Comparison" tab
2. Upload old BOM file
3. Upload new BOM file
4. Does it show comparison results?
Report: PASS, FAIL, or SKIPPED.

**Step 8: Test Hierarchy View tab (if you have a file)**
If you have a BOM XML file:
1. Click "Hierarchy View" tab
2. Upload the file
3. Does it show a tree with expand/collapse?
Report: PASS, FAIL, or SKIPPED.

**Step 9: Test exports (if Steps 6-8 produced results)**
After any tab shows results, try the export buttons:
- "Export to Excel" - should download an .xlsx file
- "Export to HTML" - should download an .html file
Report: PASS, FAIL, or SKIPPED for each.

Report all results. If everything passes, type "all verified".
If some items fail, describe exactly what happens (error messages, blank screens, etc.) and we will create fix commits.
  </how-to-verify>
  <resume-signal>Report results for each step, or type "all verified" if everything works.</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Document rollback procedure and deployment results</name>
  <files>.planning/phases/09-deployment/09-02-SUMMARY.md</files>
  <action>
Based on the user's verification results from Task 1, create the plan summary that documents:

1. **Verification results**: Which checks passed, which failed
2. **Any fixes applied**: If issues were found, document the fix commits
3. **Rollback procedure**: Document in the summary how to rollback if a future commit breaks the deployed site:

The rollback procedure to include:
```
If the deployed site breaks after a future change:
1. Find the last working commit: git log --oneline -10
2. Revert the problematic commit: git revert <commit-hash>
3. Push the revert: git push origin main
4. Wait 1-3 minutes for GitHub Pages to redeploy
5. Verify the site works again at https://mondreykr.github.io/bom-tool/
```

If Task 1 revealed issues that need fixing:
- Create atomic fix commits for each issue (one issue per commit)
- Run automated tests after each fix to confirm 2/4 baseline holds
- Ask user to re-verify the specific failing check after fix is deployed

If Task 1 passed cleanly:
- Document success in summary
- Note that deployment is complete and Phase 10 (Final Validation) can proceed
  </action>
  <verify>Summary file exists at .planning/phases/09-deployment/09-02-SUMMARY.md with verification results, rollback procedure, and deployment status.</verify>
  <done>Deployment verified in browser, results documented, rollback procedure established. Phase 9 objectives met.</done>
</task>

</tasks>

<verification>
- All three tabs render in browser (Flat BOM, Comparison, Hierarchy)
- No console errors related to module loading
- All JS files load with 200 status
- CSS renders correctly
- Tab switching works
- Rollback procedure documented
</verification>

<success_criteria>
Browser verification confirms the refactored multi-file BOM Tool works correctly when served via GitHub Pages. Any issues discovered are fixed with atomic commits. User has a documented rollback procedure for future safety.
</success_criteria>

<output>
After completion, create `.planning/phases/09-deployment/09-02-SUMMARY.md`
</output>
